<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Quantum Builder</title>
  <link rel="stylesheet" href="style.css">
  <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script"
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <script>
    let GATES = {{gate_data|safe}}
  </script>
  <script src="circuit.js"></script>
</head>
<body>
<div class='header-anchor'></div>
<header>
<div class='content'>
  <div class="title">Quantum Builder</div>
</div>
</header>
<div class='content'>
  <p>
    Hover the mouse over a gate to view its properties.
    Click on a gate and then an insertion point to add it to the circuit.
  </p>
  <div class='builder'>
    <div class='panels'>
      <span class='panel summoner panel-control'>
        <div class='block panel-control-summary'>
          <strong>Config</strong> <span class="disp-summary"></span>
        </div>
        <div class='summoned block'>
          <h2>Circuit</h2>
          <p class='info'>
            Save and load circuit and settings
          </p>
          <p>
            <button id='btn-save'>Save...</button>
            <input id='btn-load' type="file" accept=".in">
          </p>
          <p id='load-error' class='error'></p>
          <h2>Configuration</h2>
          <p>
            <strong>Qubits</strong>: <span class="disp-qubits">0</span>
            <button id='btn-qubit-more'>+</button>
            <button id='btn-qubit-less'>-</button>
          </p>
          <p>
            <strong>Shots</strong>:
            <span class="disp-shots">1024</span>
            <input type="range" min="1" max="13" value="10" class="slider" id="slider-shots">
            <span class='info'>
              Amount of times simulation is ran
            </span>
          </p>
          <p>
            <strong>Decay</strong>:
            <span class="disp-noise-full">disabled</span>
            <input type="range" min="0" max="10000" value="0" class="slider" id="slider-noise">
            <span class='info'>
              Chance to decay to \(\ket{0}\) per gate per qubit
            </span>
          </p>
          <h2>Simulation flags</h2>
          <p class='info'>
            Generally, these flags will make simulation quicker.
          </p>
          <p>
            <strong>Use sparse matrices</strong>
            <input type="checkbox" id='check-sparse'>
          </p>
          <p>
            <strong>Group gates</strong>
            <input type="checkbox" id='check-group' checked>
          </p>
        </div>
      </span>
      <div class='panel panel-gates'>
        {% for op in gate_items.values() %}
          <div class='summoner gate-kind {{op.kind}}' id='{{op.id}}'>
            <div class='gate-icon'>\({{op.symbol}}\)</div>
            <div class='summoned block gate-hint'>
              <h2>{{op.name}}</h2>
              <p>
              \[
                {{op.mathjax.factor}}
                \begin{bmatrix}{{op.mathjax.matrix}}\end{bmatrix}
              \]
              </p>
              <p>{{op.description}}</p>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    <div class='circuit' id='circuit'>
      <div class='qubits' id='qubits'>
        <!-- TECHNICAL DEBT
          -- The default qubits are manually placed
          -- so typesetting can be done.
          -- Adding more qubits will with 99.9% likelihood
          -- be done by the user *after* typesetting,
          -- so we then will be able to copy anything typeset.
          -- This is an issue if we want to save or load
          -- circuitry, and should be fixed with async behaviour.
          -->
        <div class='qubit'>
          <div class='header'>q[0]</div>
          <div class='ket0'>\(\ket{0}\)</div>
          <div class='line'></div>
        </div>
        <div class='qubit'>
          <div class='header'>q[1]</div>
          <div class='ket0'>\(\ket{0}\)</div>
          <div class='line'></div>
        </div>
      </div>
      <div id='gates' class='gates'>
      </div>
    </div>
  </div>
</div>
</body>
</html>
